# DION Rooms Fast Conference Connection

Этот проект направлен на создание удобного и простого способа подключения к конференциям в переговорных комнатах, оборудованных системой DION Rooms. Проект включает два основных способа подключения, позволяя пользователю выбрать оптимальный метод:

1. **Использование QR-кодов для быстрого подключения**.
2. **Автоматическое подключение устройства и подключение по расписанию**.

## Оглавление
- [Описание проекта](#описание-проекта)
- [Структура проекта](#структура-проекта)
- [Использование QR-кодов для быстрого подключения](#использование-qr-кодов-для-быстрого-подключения)
  - [Установка и запуск](#установка-и-запуск)
  - [Генерация и использование QR-кодов](#генерация-и-использование-qr-кодов)
- [Автоматическое подключение устройства](#автоматическое-подключение-устройства)
  - [Как работает автоматическое подключение](#как-работает-автоматическое-подключение)
- [Выбор метода подключения](#выбор-метода-подключения)
- [Особенности проекта](#особености-проекта)
- [Планы на будущее](#планы-на-будущее)

## Описание проекта
Проект включает два различных подхода для упрощения подключения к конференциям:
- Использование QR-кодов для быстрого доступа к конференции с помощью устройства пользователя.
- Автоматическое подключение устройства к конференции на основе его распознавания системой DION Rooms.

Пользователь имеет возможность выбрать метод подключения — вручную сканировать QR-код или использовать автоматическое подключение. Оба метода предоставляют гибкость и упрощают процесс подключения.

## Структура проекта
Проект организован следующим образом:
```
project-folder/
│
├── server/
│   ├── app.py               # Серверная часть на Flask для генерации QR-кодов
│   ├── device_recognition.py # Серверная часть на Flask для автоматического подключения устройства
│   ├── requirements.txt     # Зависимости для Python
│   ├── Dockerfile           # Docker конфигурация для Flask сервера
│   ├── Dockerfile_device    # Docker конфигурация для сервера автоматического подключения устройства
│
├── client/
│   ├── index.html           # Основная HTML страница
│   ├── script-html5.js      # JavaScript для сканирования QR-кодов с использованием html5-qrcode
│   ├── generate-qr.js       # JavaScript для генерации QR-кода
│   ├── device-connect.js    # JavaScript для автоматического подключения устройства
│   ├── style.css            # Стили для веб-страницы
│   ├── Dockerfile           # Docker конфигурация для клиентской части
│
├── docker-compose.yml       # Docker-compose файл для сборки контейнеров
└── README.md                # Документация проекта
```

## Использование QR-кодов для быстрого подключения

### Установка и запуск
Для запуска проекта потребуется установленный Docker и Docker Compose.

1. Сначала выполните сборку контейнеров:
   ```sh
   docker compose build
   ```
2. Затем запустите контейнеры:
   ```sh
   docker compose up
   ```
3. Проект будет доступен по следующим адресам:
   - **Серверная часть (API)**: `http://localhost:5000`
   - **Клиентская часть (интерфейс)**: `http://localhost:8080`

### Генерация и использование QR-кодов
- **Генерация QR-кода**: С помощью серверной части на Flask генерируется QR-код. Можно отправить POST-запрос на `/generate_qr` для получения QR-кода с ссылкой на конференцию.
- **Использование QR-кода**: На клиентской стороне страница предоставляет возможность сканирования QR-кода с использованием JavaScript и библиотеки `html5-qrcode`.

## Автоматическое подключение устройства

### Как работает автоматическое подключение
- Автоматическое подключение устройств происходит с использованием функции **распознавания устройства**.
- Пользовательская страница автоматически отправляет запрос на серверную часть с **device_id**, чтобы определить, есть ли запланированное подключение.
- Если такое подключение найдено и его время наступило, устройство автоматически подключается к конференции.

## Выбор метода подключения
Пользователь имеет возможность выбрать один из двух методов подключения, нажимая соответствующую кнопку на главной странице:
- **Scan QR Code** — для сканирования QR-кода и быстрого подключения.
- **Auto Connect Device** — для автоматического подключения устройства при условии его распознавания системой.

Эта функциональность добавляет гибкость и улучшает удобство использования системы.

## Особености проекта
Задачи по генерации QR-кодов и автоматизации подключения являются отдельными модулями, и вот как разделили эти два функционала.

**Разделение функционала по конечным точкам (API)**
В серверной части у нас две разные конечные точки (API), которые выполняют разные задачи:
- Генерация QR-кода: /generate_qr (в app.py)
- Автоматическое подключение устройства: /recognize_device (в device_recognition.py)
Эти конечные точки находятся в разных файлах и слушают разные порты (5000 и 5001), поэтому они выполняют свои задачи независимо друг от друга.

**Использование отдельных контейнеров и скриптов**
В клиентской части у нас также есть четкое разделение на разные JavaScript-файлы:
- script-html5.js — отвечает за сканирование QR-кода и его обработку.
- generate-qr.js — отвечает за отправку POST-запроса для генерации QR-кода и его получение.
- device-connect.js — отвечает за автоматическое подключение устройства.
Эти скрипты подключаются к HTML-странице в зависимости от того, какой функционал нужен в данный момент.

** Мы используем весь функционал на одной странице, но разделили вызовы, чтобы пользователь мог выбрать, какой функционал использовать**
Две кнопки для выбора функционала: "Scan QR Code" и "Auto Connect Device".
JavaScript будет показывать соответствующий блок интерфейса в зависимости от нажатой кнопки, таким образом, функционалы разделяются визуально и по логике.

## Планы на будущее
- Добавление интеграции с корпоративными календарями для планирования подключения.
- Расширение функциональности автоматического распознавания для поддержки более широкого спектра устройств и более точной идентификации.
- Улучшение интерфейса для лучшей интуитивности и упрощения взаимодействия пользователей с системой.

---
